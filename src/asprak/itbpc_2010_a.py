a, b, c, d = input().split()

inp_a = int(a)
inp_b = int(b)
inp_c = int(c)
inp_d = int(d)

# rumus
print(pow(inp_a, pow(inp_b, inp_c), inp_d) + 1)
